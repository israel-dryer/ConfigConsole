@page "/general/batch/batches"
@using ConfigConsole.Models;
@using ConfigConsole.Components;

<PageTitle>Batches</PageTitle>

<RadzenText Text="Batches" TextStyle="TextStyle.DisplayH4" />

<RadzenDataGrid @ref="dataGrid" @bind-Value="SelectedRecords" TItem="BatchModel" Data="tableData" AllowFiltering=true AllowSorting=true
                AllowColumnResize=true AllowColumnReorder=true Responsive=true AllowRowSelectOnRowClick=true
                PageSize="15" AllowPaging=true AllowColumnPicking=true ShowPagingSummary=true SelectionMode="DataGridSelectionMode.Single">
    <HeaderTemplate>

        <!--small screen buttons-->
        <RadzenButton Icon="add" class="rz-ripple rz-my-1 d-none d-md-inline-flex d-xl-none" Click="NavigateToCreateRecordForm" ButtonStyle="ButtonStyle.Secondary" Size="ButtonSize.Large"/>
        <RadzenButton Icon="edit" class="rz-ripple rz-my-1 d-none d-md-inline-flex d-xl-none" ButtonStyle="ButtonStyle.Secondary" Disabled="actionButtonDisabled" Click="NavigateToEditRecordForm" Size="ButtonSize.Large" />
        <RadzenButton Icon="delete" class="rz-ripple rz-my-1 d-none d-md-inline-flex d-xl-none" ButtonStyle="ButtonStyle.Secondary" Disabled="actionButtonDisabled" Click="DeleteRecord" Size="ButtonSize.Large" />
        <RadzenButton Icon="exit_to_app" class="rz-ripple rz-my-1 d-none d-md-inline-flex d-xl-none" Click="ExecuteBatch" ButtonStyle="ButtonStyle.Primary" Disabled="actionButtonDisabled" Size="ButtonSize.Large" />

        <!--large screen buttons-->
        <ExportButton @ref="exportButton" ButtonText="Export" Class="rz-ripple rz-my-1 d-none d-xl-inline-flex" ButtonStyle="ButtonStyle.Secondary" Click="ExportRecordsToCsv" FileName="batches.csv" ButtonSize="ButtonSize.Medium" />
        <RadzenButton Icon="add" Text="New" class="rz-ripple rz-my-1 d-none d-xl-inline-flex" Click="NavigateToCreateRecordForm" ButtonStyle="ButtonStyle.Secondary"/>
        <RadzenButton Icon="edit" Text="Edit" class="rz-ripple rz-my-1 d-none d-xl-inline-flex" ButtonStyle="ButtonStyle.Secondary" Disabled="actionButtonDisabled" Click="NavigateToEditRecordForm"/>
        <RadzenButton Icon="delete" Text="Delete" class="rz-ripple rz-my-1 d-none d-xl-inline-flex" ButtonStyle="ButtonStyle.Secondary" Disabled="actionButtonDisabled" Click="DeleteRecord"/>
        <RadzenButton Text="Execute" Icon="exit_to_app" class="rz-ripple rz-my-1 d-none d-xl-inline-flex" Click="ExecuteBatch"Disabled="actionButtonDisabled" ButtonStyle="ButtonStyle.Primary" />
    </HeaderTemplate>
    <Columns>
        <RadzenDataGridColumn TItem="BatchModel" Property="Id" Title="Batch" SortOrder="SortOrder.Ascending" />
        <RadzenDataGridColumn TItem="BatchModel" Property="RequestClass" Title="Request Class" />
        <RadzenDataGridColumn TItem="BatchModel" Property="ParameterJson" Title="Parameter Json" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="ScheduleType" Title="Schedule Type" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="Months" Title="Months" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="Days" Title="Days" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="Hours" Title="Hours" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="Minutes" Title="Minutes" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="DayType" Title="Day Type" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="TimeZone" Title="Time Zone" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="TimeUnit" Title="Time Unit" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="Quantity" Title="Quantity" Visible=false />
        <RadzenDataGridColumn TItem="BatchModel" Property="Enabled" Title="Enabled" />
        <RadzenDataGridColumn TItem="BatchModel" Property="LogType" Title="Log Type" />
    </Columns>
</RadzenDataGrid>

<!--mobile screen buttons-->
<RadzenCard class="d-md-none rz-background-color-base-900 m-0 p-2" Style="position: sticky; bottom: 0; top: 0;">
    <RadzenStack Orientation="Orientation.Horizontal" Gap="1">
        <ExportButton @ref="exportButton" Class="flex-fill d-md-none" ButtonStyle="ButtonStyle.Secondary" Click="ExportRecordsToCsv" FileName="batches.csv" ButtonSize="ButtonSize.Large"/>
        <RadzenButton Icon="add" class="flex-fill d-md-none" Click="NavigateToCreateRecordForm" ButtonStyle="ButtonStyle.Secondary" Size="ButtonSize.Large" />
        <RadzenButton Icon="edit" class="flex-fill d-md-none" ButtonStyle="ButtonStyle.Secondary" Disabled="actionButtonDisabled" Click="NavigateToEditRecordForm" Size="ButtonSize.Large" />
        <RadzenButton Icon="delete" class="flex-fill d-md-none" ButtonStyle="ButtonStyle.Secondary" Disabled="actionButtonDisabled" Click="DeleteRecord" Size="ButtonSize.Large" />
        <RadzenButton Icon="exit_to_app" class="flex-fill d-md-none" Click="ExecuteBatch" Size="ButtonSize.Large" Disabled="actionButtonDisabled" ButtonStyle="ButtonStyle.Primary" />
    </RadzenStack>
</RadzenCard>
